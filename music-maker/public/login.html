<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
</head>
<body>
  <div id="sawo-container" style="height: 300px; width: 300px;"></div>
  <script src="http://websdk.sawolabs.com/sawo.min.js"></script> 
  <div id="status"></div>
  <script> 
  // Fetching payload from sessionStorage
  const payload = sessionStorage.getItem("payload");
  if (payload) {
      // If the payload is available, that means the user has logged in already.
      // So redirecting back to "/login"
      window.location.href = "/success";
  }
  var config = 
  { 
  // should be same as the id of the container created on 3rd step 
  containerID: "sawo-container", 
  // can be one of 'email' or 'phone_number_sms' 
  identifierType: "email", 
  // Add the API key copied from 2nd step 
  apiKey: "61aef098-2d25-40be-9f39-498d3d6062bf", 
  // Add a callback here to handle the payload sent by sdk 
  onSuccess: (payload) => {
                    document.getElementById("status").innerHTML =
                        "<p>Login Success now click <a href='/success'>here </a>to get to dashboard</p>";
                    console.log(payload)
                     // Storing the payload in sessionStorage
                    sessionStorage.setItem("payload", JSON.stringify(payload));
                    // Redirecting to "/success"
                    window.location.href = "/success";                    
                }, 
};
  var sawo = new Sawo(config); 
  sawo.showForm(); 

  </script>
</body>
</html>